<script setup lang="ts">
import { ref } from 'vue'
import type { Ref } from 'vue';
import ChatBox from './ChatBox.vue'
import ChatRoom from './ChatRoom.vue'
import { useChattingStore } from '@/store/chatStore';
import { useUserStore } from '@/store/userStore'

import ChatRoom from '@/components/chatting/ChatRoom.vue';

const show: Ref<boolean> = ref(false);
const onClick = () => {
  show.value = !show.value
}

const chattingStore = useChattingStore()
const userStore = useUserStore();
chattingStore.connectSocket(userStore.id);
</script>

<template>
  <!-- TW Elements is free under AGPL, with commercial license required for specific uses. See more details: https://tw-elements.com/license/ and contact us for queries at tailwind@mdbootstrap.com -->
  <div
    class="group fixed bottom-10 right-10 z-10 flex h-14 w-14 items-center justify-center rounded-full bg-blue-500 uppercase leading-normal text-white shadow-lg"
  >
    <div
      v-if="show"
      class="w-[290px] h-[484px] rounded-md absolute w-50 h-50 right-10 bottom-10 place-content-center"
    >
      <ChatBox />
      <!-- <ChatRoom /> -->
    </div>
    <a
      @click="onClick()"
      data-te-ripple-init
      data-te-ripple-color="light"
      class="cursor-pointer rounded-full p-5"
    >
      <svg viewBox="0 0 75 71" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-8 h-8">
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M38.4234 62.7213C41.0454 62.5395 43.645 62.1163 46.1889 61.4572C49.3284 62.4131 52.6472 62.6294 55.8846 62.0892C56.0127 62.0686 56.1424 62.0586 56.2721 62.0595C57.4273 62.0595 58.9439 62.7287 61.1535 64.1415V61.8178C61.154 61.4158 61.2615 61.0211 61.4652 60.6742C61.6688 60.3273 61.9612 60.0406 62.3124 59.8436C63.2738 59.3008 64.1681 58.6762 64.9841 57.9883C68.2036 55.2668 70.022 51.6381 70.022 47.7937C70.022 46.5036 69.817 45.2506 69.4295 44.0535C70.4021 42.2428 71.1883 40.3392 71.7659 38.365C73.6333 41.1572 74.6339 44.4369 74.6425 47.7937C74.6425 53.0174 72.2056 57.8879 67.9912 61.4497C67.2877 62.0438 66.5472 62.5927 65.7741 63.0931V68.525C65.7741 70.3951 63.6128 71.4696 62.0888 70.358C60.6477 69.283 59.1554 68.278 57.6173 67.3464C57.1769 67.0834 56.7187 66.8511 56.2461 66.6512C54.9791 66.8408 53.6824 66.9374 52.3745 66.9374C47.113 66.9374 42.254 65.3647 38.4272 62.7213H38.4234ZM10.6033 51.8574C3.95571 46.2322 0.117676 38.5695 0.117676 30.3565C0.117676 13.5774 15.984 0.166748 35.3567 0.166748C54.7332 0.166748 70.5995 13.5774 70.5995 30.3565C70.5995 47.1393 54.7295 60.55 35.3567 60.55C33.1806 60.55 31.0269 60.3827 28.9178 60.0481C28.0049 60.2637 24.3569 62.4276 19.0992 66.257C17.195 67.6476 14.4935 66.3054 14.4935 63.9668V54.7017C13.132 53.8452 11.8321 52.8948 10.6033 51.8574ZM29.0445 54.3336C29.2047 54.3336 29.3687 54.3447 29.5289 54.3708C31.4293 54.6905 33.3818 54.8541 35.3567 54.8541C51.7224 54.8541 64.8201 43.782 64.8201 30.3565C64.8201 16.9347 51.7224 5.86265 35.3567 5.86265C18.9985 5.86265 5.89335 16.9347 5.89335 30.3565C5.89335 36.8481 8.9526 42.9604 14.3631 47.5335C15.7232 48.6786 17.2174 49.7196 18.8197 50.6268C19.7177 51.1324 20.2729 52.0768 20.2729 53.0955V58.4382C24.4314 55.6535 27.1665 54.3336 29.0445 54.3336ZM20.3363 36.0561C17.7838 36.0561 15.7157 34.0113 15.7157 31.4979C15.7157 28.9809 17.7838 26.9397 20.3363 26.9397C22.8887 26.9397 24.9568 28.9809 24.9568 31.4979C24.9568 34.015 22.8887 36.0561 20.3363 36.0561ZM35.3567 36.0561C32.8043 36.0561 30.7362 34.0113 30.7362 31.4979C30.7362 28.9809 32.8043 26.9397 35.3567 26.9397C37.9092 26.9397 39.9773 28.9809 39.9773 31.4979C39.9773 34.015 37.9092 36.0561 35.3567 36.0561ZM50.3772 36.0561C47.8248 36.0561 45.7567 34.0113 45.7567 31.4979C45.7567 28.9809 47.8248 26.9397 50.3772 26.9397C52.9297 26.9397 54.9978 28.9809 54.9978 31.4979C54.9978 34.015 52.9297 36.0561 50.3772 36.0561Z"
          fill="white"
        />
      </svg>
    </a>
  </div>
</template>

<style scoped></style>
